<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Registro</title>
    <link rel="stylesheet" href="/styles.css">
  </head>
  <body>
    <header>
      <div class="header-content">
        <h1>ðŸ›’ Tienda</h1>
        <nav>
          <a href="/">Inicio</a>
          <a href="/products.html">Productos</a>
          <a href="/login.html" class="nav-btn primary">Login</a>
        </nav>
      </div>
    </header>
    <div class="auth-container">
        <div class="auth-card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
            <h2 style="margin:0">Registro</h2>
            <button class="secondary" onclick="history.back()">Volver</button>
          </div>
          <form id="registerForm">
            <label>Nombre <input name="nombre" required></label>
            <label>Email <input name="email" type="email" required></label>
            <label>Password <input name="password" type="password" required></label>
            <label>Nivel <select name="nivel"><option value="usuario">Usuario</option><option value="admin">Admin</option></select></label>
            <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
              <button type="submit">Registrarse</button>
            </div>
          </form>
          <div id="msg" class="msg" style="display:none"></div>
        </div>
    </div>
    <script>
    document.getElementById('registerForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const f = e.target;
      const data = { nombre: f.nombre.value, email: f.email.value, password: f.password.value, nivel: f.nivel.value };
      const res = await fetch('/api/auth/register', { method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify(data) });
      const j = await res.json();
      const msg = document.getElementById('msg');
      if (j.error) { msg.className='msg error'; msg.innerText=j.error; msg.style.display='block'; } else { msg.className='msg ok'; msg.innerText='Registrado correctamente'; msg.style.display='block'; }
    });
    </script>
    <footer>
      <p>Â© 2026 Tienda. Todos los derechos reservados.</p>
    </footer>
  </body>
</html>
